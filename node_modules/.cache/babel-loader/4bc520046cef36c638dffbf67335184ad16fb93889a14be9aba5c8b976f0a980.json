{"ast":null,"code":"import React from'react';import{Link}from'react-router-dom';import{addToCart}from'../store/Actions/cartActions';import emptyheart from'../assets/emptyheart.png';import fullheart from\"../assets/fullreadheart.png\";import{useSelector,useDispatch}from'react-redux';import i18n from'i18next';import{useTranslation}from'react-i18next';import{useNavigate}from'react-router-dom';import{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Product(_ref){let{id,images,title,description,price}=_ref;const{t}=useTranslation();const rtl=i18n.language===\"ar\";const navigate=useNavigate();const imageUrl=images[0].replace(/[\\[\\]\"\"]/g,'');const[amount,setAmount]=useState(()=>{const storedAmount=localStorage.getItem(\"amount-\".concat(id));return storedAmount?parseInt(storedAmount):null;});useEffect(()=>{if(amount===null){const generateRandomAmount=()=>{const randomAmount=Math.floor(Math.random()*10)+1;setAmount(randomAmount);localStorage.setItem(\"amount-\".concat(id),randomAmount);};generateRandomAmount();}},[id]);const dispatch=useDispatch();const favorites=useSelector(state=>state.favoriteProduct.favorites);const isFavorite=Array.isArray(favorites)?favorites.find(fav=>fav.id===id)!==undefined:false;const handleFavoriteClick=event=>{event.preventDefault();dispatch({type:'TOGGLE_FAVORITE',payload:{id,images,title,price}});};// const handleAddToCart = () => {\n//   const isLoggedIn = localStorage.getItem(\"isLoggedIn\");\n//   if (isLoggedIn) {\n//     dispatch(addToCart({ id, title, price, imageUrl, quantity: 1 }));\n//   } else {\n//     navigate(\"/Registration\");\n//   }\n// }\nconst handleAddToCart=()=>{const isLoggedIn=localStorage.getItem(\"isLoggedIn\");if(isLoggedIn){dispatch(addToCart({id,title,price,imageUrl,quantity:1}));const newAmount=amount-1;setAmount(newAmount);localStorage.setItem(\"amount-\".concat(id),newAmount);}else{navigate(\"/Registration\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-sm h-96 flex-col justify-between bg-white rounded-lg shadow-md overflow-hidden mx-2 my-4 w-72 relative \".concat(rtl?'rtl':''),children:[/*#__PURE__*/_jsx(Link,{to:\"/productdetails/\".concat(id),children:/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:title,className:\"w-full h-1/2 object-cover\"})}),/*#__PURE__*/_jsx(Link,{to:\"#\",onClick:handleFavoriteClick,className:\"absolute top-2 \".concat(rtl?'left-8':'right-8'),children:isFavorite?/*#__PURE__*/_jsx(\"img\",{src:fullheart,width:35,height:35,className:\"text-red-600\"}):/*#__PURE__*/_jsx(\"img\",{src:emptyheart,width:35,height:35,className:\"text-gray-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-lg h-1/4 font-bold mb-2\",children:t('title',{title})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 h-1/10 text-md mb-4\",children:t('onlyLeft',{amount})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-bold\",children:t('price',{price})}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-orange-500 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded\",onClick:handleAddToCart,disabled:amount===0,children:t('addToCart')})]})]})]});}export default Product;","map":{"version":3,"names":["React","Link","addToCart","emptyheart","fullheart","useSelector","useDispatch","i18n","useTranslation","useNavigate","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Product","_ref","id","images","title","description","price","t","rtl","language","navigate","imageUrl","replace","amount","setAmount","storedAmount","localStorage","getItem","concat","parseInt","generateRandomAmount","randomAmount","Math","floor","random","setItem","dispatch","favorites","state","favoriteProduct","isFavorite","Array","isArray","find","fav","undefined","handleFavoriteClick","event","preventDefault","type","payload","handleAddToCart","isLoggedIn","quantity","newAmount","className","children","to","src","alt","onClick","width","height","disabled"],"sources":["/home/hp/Downloads/lastupdate/src/Components/ProductItem.js"],"sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { addToCart } from '../store/Actions/cartActions';\nimport emptyheart from '../assets/emptyheart.png';\nimport fullheart from \"../assets/fullreadheart.png\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport i18n from 'i18next';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigate } from 'react-router-dom';\nimport { useState,useEffect } from 'react';\n\nfunction Product({ id, images, title, description, price }) {\n  const { t } = useTranslation();\n  const rtl = i18n.language === \"ar\";\n  const navigate = useNavigate(); \n\n  \n  const imageUrl = images[0].replace(/[\\[\\]\"\"]/g, '');\n  const [amount, setAmount] = useState(() => {\n    const storedAmount = localStorage.getItem(`amount-${id}`);\n    return storedAmount ? parseInt(storedAmount) : null;\n  });\n\n  useEffect(() => {\n    if (amount === null) {\n      const generateRandomAmount = () => {\n        const randomAmount = Math.floor(Math.random() * 10) + 1;\n        setAmount(randomAmount);\n        localStorage.setItem(`amount-${id}`, randomAmount);\n      };\n      generateRandomAmount();\n    }\n  }, [id]);\n\n  const dispatch = useDispatch();\n  const favorites = useSelector((state) => state.favoriteProduct.favorites);\n  const isFavorite = Array.isArray(favorites) ? favorites.find((fav) => fav.id === id) !== undefined : false;\n\n  const handleFavoriteClick = (event) => {\n    event.preventDefault(); \n    dispatch({ type: 'TOGGLE_FAVORITE', payload: { id, images, title, price } });\n  };\n\n  // const handleAddToCart = () => {\n  //   const isLoggedIn = localStorage.getItem(\"isLoggedIn\");\n\n  //   if (isLoggedIn) {\n  //     dispatch(addToCart({ id, title, price, imageUrl, quantity: 1 }));\n  //   } else {\n  //     navigate(\"/Registration\");\n  //   }\n\n  // }\n  const handleAddToCart = () => {\n    const isLoggedIn = localStorage.getItem(\"isLoggedIn\");\n  \n    if (isLoggedIn) {\n      dispatch(addToCart({ id, title, price, imageUrl, quantity: 1 }));\n      const newAmount = amount - 1;\n      setAmount(newAmount);\n      localStorage.setItem(`amount-${id}`, newAmount);\n    } else {\n      navigate(\"/Registration\");\n    }\n  };\n\n  return (\n    <div\n      className={`max-w-sm h-96 flex-col justify-between bg-white rounded-lg shadow-md overflow-hidden mx-2 my-4 w-72 relative ${rtl ? 'rtl' : ''}`}\n    >\n      <Link to={`/productdetails/${id}`}>\n        <img\n          src={imageUrl}\n          alt={title}\n          className=\"w-full h-1/2 object-cover\"\n        />\n      </Link>\n      <Link to=\"#\" onClick={handleFavoriteClick} className={`absolute top-2 ${rtl ? 'left-8' : 'right-8'}`}>\n        {isFavorite ? (\n          <img src={fullheart} width={35} height={35} className=\"text-red-600\" />\n        ) : (\n          <img src={emptyheart} width={35} height={35} className=\"text-gray-400\" />\n        )}\n      </Link>\n      <div className=\"p-4\">\n        <h5 className=\"text-lg h-1/4 font-bold mb-2\">{t('title', { title })}</h5>\n        <p className=\"text-red-600 h-1/10 text-md mb-4\">{t('onlyLeft', { amount })}</p>\n        <div className=\"flex justify-between mb-4\">\n          <span className=\"text-lg font-bold\">{t('price', { price })}</span>\n          <button\n            className=\"bg-orange-500 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded\"\n            onClick={handleAddToCart}\n            disabled={amount === 0}\n          >\n            {t('addToCart')}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Product;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}